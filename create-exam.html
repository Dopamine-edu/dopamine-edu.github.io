<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create Exam</title>
    <!-- Firebase SDK Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
</head>
<body>
    <h1>Create Exam</h1>
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBXXaWWoFqn6MpH6IWSm6CGaqUJzAmzbzA",
            authDomain: "dopamine-quiz.firebaseapp.com",
            projectId: "dopamine-quiz",
            storageBucket: "dopamine-quiz.appspot.com",
            messagingSenderId: "822531459966",
            appId: "1:822531459966:web:8e7d2385090e997eb1c12f"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Sanitize file names
        function sanitizeFileName(name) {
            return name.replace(/\s+/g, '-').replace(/[^a-zA-Z0-9\u0980-\u09FF-]/g, '');
        }

        // Check authentication and load data
        auth.onAuthStateChanged(user => {
            if (!user) {
                window.location.href = 'auth.html'; // Redirect if not authenticated
            } else {
                console.log('User authenticated:', user.uid);
                // Example: Load questions for a chapter
                const subject = "Botany";
                const chapter = "Chapter 01: কোষ ও এর গঠন";
                const sanitizedSubject = sanitizeFileName(subject);
                const sanitizedChapter = sanitizeFileName(chapter.replace(/^Chapter \d+:\s*/, ''));
                const filePath = `./questions/subjects/${sanitizedSubject}/${sanitizedChapter}.json`;
                
                fetch(filePath)
                    .then(response => response.json())
                    .then(questions => {
                        console.log('Questions:', questions);
                        // Proceed with your exam creation logic
                    })
                    .catch(error => console.error('Error:', error));
            }
        });
    </script>
</body>
</html>
